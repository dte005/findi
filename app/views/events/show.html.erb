<div class="container-fluid">
  <div class="row" style="height:85vh;">
    <div class="col-md-7">
      <div class="d-flex flex-column">
        <div class="row" style="height: 55vh; background-image: url('<%= image_path 'show.jpg' %>'); background-size:cover; border-bottom:5px solid #5c005c; position:relative;">
          <div class="d-flex flex-row justify-content-center title-show-banner-content">
            <h1><%= @event.title %> Show</h1>
          </div>
        </div>
        <div class="row justify-content-around details-show-content">
          <div class="d-flex flex-column justify-content-between" style="width: 30vw; height: 26vh;">
            <div class="d-flex flex-column">
            <div class="mt-3">
              <% @confirmed.each do |accept| %>
              <a href="#" data-toggle="modal" data-target="#friendsConfirmedModal"><%= accept.user.email %>...</a>
              <% end %>
            </div>
            <div class="mt-1">
              <article style="color:#666666; font-size:20px;"><%= @event.description %></article>
            </div>
            </div>
            <div class="d-flex flex-row mt-5">
              <div class="d-flex flex-row mr-3 align-items-center mr-4">
                <div class="mr-3"><i class="fas fa-calendar-check" style="color:#5c005c; font-size:30px;"></i></div><div style="color:#FF708A;"><%= @event.date.day%>/<%= @event.date.month%>/<%= @event.date.year%></div>
              </div>
              <div class="d-flex flex-row mr-3 align-items-center">
                <div class="mr-3"><i class="fas fa-map-marker-alt" style="color:#5c005c; font-size:30px;"></i></div><div style="color:#FF708A;"><span id="suggestion-choosed">Endereco do local escolhido</span></div>
              </div>
            </div>
        </div>
        <div class="d-flex flex-column" style="width: 20vw; height: 26vh;">
          <div class="d-flex flex-column justify-content-between" style="height: 26vh;">

            <div class="d-flex flex-column mt-3">

            <div class="d-flex flex-row align-items-center">
              <% if @event.user == current_user %>
              <div><i class="fas fa-plus-square mr-3" data-toggle="modal" data-target="#suggestionModal" style="color:#5c005c; font-size:30px;"></i></div><div><strong style="color:#666666;">Suggestion</strong></div>
              <% else %>
              <div><strong style="color:#4d4d4d;">Added suggestion by owner</strong></div>
              <% end %>
            </div>

            <div>
                <% @event.suggestions.each do |suggestion| %>
                  <div class="mt-2 ml-4" style="color:#666666;">
                    <span id="suggestion-selected"><%= suggestion.title %></span>
                    <%= link_to suggestion_path(suggestion.id), method: :delete, data: { confirm: "are you shure?" } do %>
                    <i class="far fa-trash-alt" style="color:#FF708A;"></i>
                    <% end %>
                  </div>
                <% end %>
            </div>

            </div>

            <div class="d-flex flex-row align-items-center">
              <% if @event.user == current_user %>
              <i class="fas fa-plus-square mr-3" data-toggle="modal" data-target="#friendsModal" style="color:#5c005c; font-size:30px;"></i><div><strong style="color:#666666;" data-toggle="modal" data-target="#friendsInviteddModal">Invite your friends</strong></div>
              <% end %>
            </div>

          </div>
      </div>
      </div>
      </div>
    </div>
      <div class="col-md-5 p-0">
        <%= render 'chat'%>
      </div>
  </div>
</div>

<!-- Modal Suggestion -->
<div class="modal fade" id="suggestionModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Insert a suggestion</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <%= simple_form_for [@event, @suggestion] do |r| %>
        <%= r.input :title, label: 'Title' %>
        <%= r.input :address, label: 'Address'%>
        <%= r.button :submit, class:"btn btn-primary" %>
        <% end %>
      </div>
    </div>
  </div>
</div>

<!-- Modal Amigos -->
<div class="modal fade" id="friendsModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Invite a friend</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <%= simple_form_for [@event, @invite] do |f| %>
        <%= f.input :email, label: 'Email'%>
        <%= f.input :message, label: 'Message' %>
        <%= f.submit 'Invite', class:"btn btn-primary" %>
        <% end %>
      </div>
    </div>
  </div>
</div>


<!-- Modal Amigos confirmados -->
<div class="modal fade" id="friendsConfirmedModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Confirmed Friends</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div>
          <% @event.invites.each do |invite| %>
          <div style="border-bottom:1px solid lightgrey;">
            <div>
            <strong>msg:</strong> <%= invite.message %>
            </div>
            <div>
            <strong>email:</strong>  <%= invite.email %>
            <% if invite.accepted %>
                <i class="fas fa-check" style="color:green;"></i>
              <% else %>
                <i class="fas fa-times" style="color:red;"></i>
              <% end %>
              </div>
          </div>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Modal Amigos convidados -->
<div class="modal fade" id="friendsInviteddModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Confirmed Friends</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div>
          <% @invited.each do |inv| %>
            <div style="border-bottom:1px solid lightgrey;">
              <%= inv.email %>
            </div>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>
